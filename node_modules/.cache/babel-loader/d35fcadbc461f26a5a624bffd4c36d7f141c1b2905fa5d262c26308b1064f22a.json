{"ast":null,"code":"// React\nimport{useState,useEffect}from'react';// PropTypes\n// Style\nimport'./style.scss';// Redux\nimport{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Carousel(_ref){let{pictures}=_ref;const{nightMode}=useSelector(state=>state.display);const total=pictures.length;let[position,setPosition]=useState(0);const[oldPosition,setOldPosition]=useState(0);const[mvt,setMvt]=useState(\"none\");// Function that calculates the new position in carousel\nfunction calcPosition(direction){if(direction===\"forward\"){if(position===total-1){position=0;setOldPosition(total-1);}else{position+=1;setOldPosition(position-1);}}if(direction===\"back\"){if(position===0){position=total-1;setOldPosition(0);}else{position-=1;setOldPosition(position+1);}}return position;}// Function that displays sliding then initializes mvt variable\nfunction sliding(direction){setMvt(direction);setTimeout(()=>{setMvt('none');},700);}// Function that triggers the carousel animation\nfunction handleArrowClick(direction){setPosition(calcPosition(direction));sliding(direction);}useEffect(()=>{const interval=setInterval(()=>{handleArrowClick(\"forward\");},2000);return()=>clearInterval(interval);},[handleArrowClick]);return/*#__PURE__*/_jsxs(\"div\",{className:\"carousel\",children:[nightMode&&/*#__PURE__*/_jsx(\"div\",{className:\"carousel_gradient\"}),/*#__PURE__*/_jsx(\"img\",{className:\"carousel_image carousel_image_current carousel_image_current_mvt-\".concat(mvt),src:pictures[position],alt:\"Projet\",loading:\"lasy\"}),/*#__PURE__*/_jsx(\"img\",{className:\"carousel_image carousel_image_previous carousel_image_previous_mvt-\".concat(mvt),src:pictures[oldPosition],alt:\"Projet\",loading:\"lasy\"}),total>1&&/*#__PURE__*/_jsx(\"div\",{className:\"carousel_arrow carousel_arrow_forward\",onClick:()=>handleArrowClick(\"forward\"),children:/*#__PURE__*/_jsx(\"i\",{className:\"carousel_icon fa-solid fa-angle-right\"})}),total>1&&/*#__PURE__*/_jsx(\"div\",{className:\"carousel_arrow carousel_arrow_back\",onClick:()=>handleArrowClick(\"back\"),children:/*#__PURE__*/_jsx(\"i\",{className:\"carousel_icon fa-solid fa-angle-left\"})}),total>1&&/*#__PURE__*/_jsx(\"div\",{className:nightMode?\"carousel_page-numbers text_nightmode2\":\"carousel_page-numbers text_lightmode\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\".concat(position+1,\"/\").concat(total)})})]});}export default Carousel;","map":{"version":3,"names":["useState","useEffect","useSelector","jsx","_jsx","jsxs","_jsxs","Carousel","_ref","pictures","nightMode","state","display","total","length","position","setPosition","oldPosition","setOldPosition","mvt","setMvt","calcPosition","direction","sliding","setTimeout","handleArrowClick","interval","setInterval","clearInterval","className","children","concat","src","alt","loading","onClick"],"sources":["/home/amandine/Documents/OpenClassRooms/FormationIntegrateurWeb/Projet_12/P12_GitHub/p12/src/components/Carousel/index.js"],"sourcesContent":["// React\nimport {useState, useEffect} from 'react'\n\n// PropTypes\nimport PropTypes from 'prop-types'\n\n// Style\nimport './style.scss'\n\n// Redux\nimport { useSelector } from 'react-redux'\n\n\nfunction Carousel ({pictures}) {\n  \n  const { nightMode } = useSelector((state) => state.display)\n  const total = pictures.length\n  let [position, setPosition] = useState(0)\n  const [oldPosition, setOldPosition] = useState(0)\n  const [mvt, setMvt] = useState(\"none\")\n\n  // Function that calculates the new position in carousel\n  function calcPosition (direction) {\n    if (direction === \"forward\") {\n      if (position === total - 1) {\n        position = 0\n        setOldPosition(total - 1)\n      }\n      else {\n        position += 1\n        setOldPosition(position - 1)\n      }\n    }\n    if (direction === \"back\") {\n      if (position === 0) {\n        position = total - 1\n        setOldPosition(0)\n      }\n      else {\n        position -= 1\n        setOldPosition(position + 1)\n      }\n    }\n    return position\n  }\n\n  // Function that displays sliding then initializes mvt variable\n  function sliding (direction) {\n    setMvt(direction)\n    setTimeout(() => {setMvt('none')}, 700)\n  }\n  \n  // Function that triggers the carousel animation\n  function handleArrowClick (direction) {\n    setPosition(calcPosition(direction))\n    sliding(direction)\n  }\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      handleArrowClick(\"forward\")\n    }, 2000)\n    return () => clearInterval(interval)\n  }, [handleArrowClick]) \n\n  return (\n    <div className='carousel'>\n      {nightMode && <div className='carousel_gradient'></div>}\n\n      <img className={`carousel_image carousel_image_current carousel_image_current_mvt-${mvt}`} src={pictures[position]} alt=\"Projet\" loading=\"lasy\"></img>\n      <img className={`carousel_image carousel_image_previous carousel_image_previous_mvt-${mvt}`} src={pictures[oldPosition]} alt=\"Projet\" loading=\"lasy\"></img>\n\n      {total > 1 && <div className='carousel_arrow carousel_arrow_forward' onClick={() => handleArrowClick(\"forward\")}><i className=\"carousel_icon fa-solid fa-angle-right\"></i></div>}\n      {total > 1 && <div className='carousel_arrow carousel_arrow_back' onClick={() => handleArrowClick(\"back\")}><i className=\"carousel_icon fa-solid fa-angle-left\"></i></div>}\n\n      {total > 1 && <div className={nightMode?\"carousel_page-numbers text_nightmode2\":\"carousel_page-numbers text_lightmode\"}><h3>{`${position+1}/${total}`}</h3></div>}\n    </div>\n  )\n}\n\nCarousel.propTypes = {\n  pictures: PropTypes.arrayOf(PropTypes.string)\n}\n\nexport default Carousel"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}